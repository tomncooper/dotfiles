---
- import_playbook: fedora.yml
- hosts: localhost
  become: true
  tasks:
    - name: Install native packages
      dnf: name={{item}}
      with_items:
        - waybar
        - kanshi
        - pasystray
        - copyq
        - ranger
        - rofi-wayland
        - playerctl
        - okular
    - name: Get latest dunst-waybar release
      community.general.github_release:
        user: tomncooper
        repo: dunst-waybar
        action: latest_release
      register: dunst_waybar_release
    - name: Install dunst-waybar from latest RPM
      dnf:
        name: "{{ dunst_waybar_release.assets | selectattr('name', 'match', '.*x86_64\\.rpm$') | map(attribute='browser_download_url') | first }}"
        state: present
        disable_gpg_check: true
